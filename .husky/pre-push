branch=$(git symbolic-ref --short HEAD 2>/dev/null)

if [ "$branch" = "main" ]; then
  exit 0
fi

changesets=$(git diff --name-only origin/main...HEAD -- '.changeset/*.md' 2>/dev/null | grep -v 'README.md' || true)

if [ -z "$changesets" ]; then
  echo "‚ùå No changeset found for this branch."
  echo "   Please run 'pnpm changeset' to create one before pushing."
  exit 1
fi
